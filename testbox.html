<html>
  <script type="text/javascript" src="https://raw.github.com/visionmedia/mocha/master/mocha.js"></script>
  <link  rel="stylesheet" href="https://raw.github.com/visionmedia/mocha/master/mocha.css"></script>
  <style>
  
    .testset.success .input > div,
    .testset.success .expect > div{
      border : 1px green solid;
    }
    .testset.failed .input > div,
    .testset.failed .expect > div{
      border : 1px red solid;
    }
  </style>
  
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  
  <!--
  <script type="text/javascript" src="http://chaijs.com/chai.js"></script>
  var should = chai.should();
  <script type="text/javascript" src="https://raw.github.com/chaijs/chai-jquery/master/chai-jquery.js"></script>
  -->

  <script type="text/javascript" src="jquery.centerimg.js"></script>
  <script type="text/javascript">
    mocha.setup("bdd")

    function formatHtml(target){
      var html = target.html()
      html = html.replace(/^\s+/g,"");
      html = html.replace(/\n\s+/g,"");
      html = html.replace(/\n/g,"");
      return html
    }
  </script>
  <div id="mocha"></div>
  <div id="template" class="testset">
    <h1 class="title"><h1>
    <div class="input">
    </div>
    <div class="expect">
    </div>
  </div>
  
  
  <div id="normal_test" class="testset">
    <h1 class="title">Normal test<h1>
    <div class="input">
      <img class="centerimg"
           src="landscape.png"
           data-link=""
           data-width="99"
           data-height="99">
    </div>
    <div class="expect">
      <div style="width: 99px; height: 99px;">
        <a style="width: 99px; height: 99px; font-size: 0px; display: block; vertical-align: middle; text-align: center; text-decoration: none; outline: none;">
          <img class="centerimg" src="landscape.png" data-link="" data-width="99" data-height="99" style="max-height: 99px; max-width: 99px; line-height: 99px; vertical-align: middle; border: none;">
          <span style="height: 99px; display: inline-block; font-size: 0px; width: 1px; margin-left: -1px; overflow: hidden; vertical-align: middle;"></span>
        </a>
      </div>
    </div>
  </div>
  
  
  <div id="template" class="testset">
    <h1 class="title">Link test<h1>
    <div class="input">
      <img class="centerimg"
            data-src="portrait.png"
            data-link="http://google.com"
            data-width="200"
            data-height="100">
    </div>
    <div class="expect">
      <div style="width: 200px; height: 100px;">
        <a style="width: 200px; height: 100px; font-size: 0px; display: block; vertical-align: middle; text-align: center; text-decoration: none; outline: none;" href="http://google.com">
          <img class="centerimg" data-src="portrait.png" data-link="http://google.com" data-width="200" data-height="100" src="portrait.png" style="max-height: 100px; max-width: 200px; line-height: 100px; vertical-align: middle; border: none;">
          <span style="height: 100px; display: inline-block; font-size: 0px; width: 1px; margin-left: -1px; overflow: hidden; vertical-align: middle;"></span>
        </a>
      </div>
    </div>
  </div>
  
  <div id="template" class="testset">
    <h1 class="title">Parent class Test<h1>
    <div class="input">
       <img class="centerimg"
            data-src="portrait.png"
            data-link="http://google.com"
            data-width="200"
            data-height="100"
            data-parent-class="foo"
            data-link-class="bar">
    </div>
    <div class="expect">
      <div style="width: 200px; height: 100px;" class="foo">
        <a style="width: 200px; height: 100px; font-size: 0px; display: block; vertical-align: middle; text-align: center; text-decoration: none; outline: none;" href="http://google.com" class="bar">
          <img class="centerimg" data-src="portrait.png" data-link="http://google.com" data-width="200" data-height="100" src="portrait.png" style="max-height: 100px; max-width: 200px; line-height: 100px; vertical-align: middle; border: none;">
          <span style="height: 100px; display: inline-block; font-size: 0px; width: 1px; margin-left: -1px; overflow: hidden; vertical-align: middle;"></span>
        </a>
      </div>
    </div>
  </div>
  
  
  <script type="text/javascript" src="./test/mocha.js"></script>

  <script>
    if (window.mochaPhantomJS) { mochaPhantomJS.run(); }
    else { mocha.run(); }
  </script>
</html>